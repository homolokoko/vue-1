import{_ as f}from"./lodash-CuKFpooT.js";import{_,a as n,b as t,g,h as x,o as i,j as y,v,p as w,i as h,t as u,n as $,f as m,r as b}from"./index-Cabdi3id.js";const P={data(){return{photographs:[]}},mounted(){f.times(10,()=>{this.photographs.push({})})},methods:{changeImage(s,e){this.photographs[e].path=s,this.photographs[e].src=`https://localhost/storage/tmp${s}`},emptyImage(s){this.photographs[s].path=null},save(){console.log("photograph",this.photographs)}}},C={class:"grid grid-cols-2"},j={class:"w-full relative"},k=["src"],T=["onInput","onFocusout","onUpdate:modelValue"];function F(s,e,p,a,l,r){return i(),n(g,null,[t("div",C,[(i(!0),n(g,null,x(l.photographs,(o,d)=>(i(),n("div",{key:d,class:"relative border divide-y"},[t("div",j,[t("img",{src:o.src?o.src:"/example.png",alt:""},null,8,k),y(t("input",{onInput:w(c=>r.changeImage(c.target.value,d),["stop"]),onFocusout:c=>r.emptyImage(d),"onUpdate:modelValue":c=>o.path=c,type:"text",class:"h-full w-full absolute top-0 left-0 opacity-0"},null,40,T),[[v,o.path]])]),e[1]||(e[1]=t("input",{type:"text",class:"px-2 py-2 w-full",placeholder:"type here ...."},null,-1))]))),128))]),t("button",{onClick:e[0]||(e[0]=o=>r.save()),class:"px-4 py-3 rounded-md text-xs font-semibold uppercase traking-wider text-white bg-teal-500"},"save")],64)}const U=_(P,[["render",F]]),D={data(){return{user_id:"1246",photographs:{}}},mounted(){h.get(`https://localhost/api/inspection/photograph?user_id=${this.user_id}`).then(s=>{this.photographs=s.data})},methods:{async handleFilesChange(s){let e=f.chunk(s.target.files,20);f.each(e,async(p,a)=>{await this.fileUploadToSever(p)})},fileToBase64(s){return new Promise((e,p)=>{const a=new FileReader;a.onload=()=>{e(a.result)},a.onerror=()=>{p(new Error("Error reading file"))},a.readAsDataURL(s)})},async fileUploadToSever(s){try{let e=await Promise.all(f.map(s,p=>({img:this.fileToBase64(p)})));await h.post("https://localhost/api/ispection/photograph",{items:e})}catch(e){console.log(e)}},firstPage(s){h.get(`${s}&user_id=${this.user_id}`).then(e=>{this.photographs=e.data})},lastPage(s){h.get(`${s}&user_id=${this.user_id}`).then(e=>{this.photographs=e.data})},routePage(s){h.get(`${s}&user_id=${this.user_id}`).then(e=>{this.photographs=e.data})}}},B={class:"relative flex items-center justify-center border-2 border-dashed rounded-lg"},I={class:"grid grid-cols-4 overflow-auto gap-0"},L=["onDragstart","src"],M={class:"flex divide-x w-full shadow-md"},V={class:"px-3 py-2"},E={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},S={class:"px-3 py-2"},H={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},N={class:"px-3 py-2"},R={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},z={class:"px-3 py-2"},A={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},q={class:"px-3 py-2"},G={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},J={class:"px-3 py-2"},K={class:"w-5 h-5 flex justify-center items-center text-xs font-bold bg-red-200 text-red-800 rounded-full"},O={class:"flex divide-x w-full bg-blue-500 justify-end"},Q=["onClick","disabled","innerHTML"];function W(s,e,p,a,l,r){return i(),n(g,null,[t("div",B,[e[3]||(e[3]=t("div",{class:"flex flex-col items-center justify-center p-10 space-y-3"},[t("label",{for:"files",class:"px-4 py-2 text-xs font-semibold tracking-wider text-white uppercase bg-red-400 rounded-md"},"Browse"),t("h3",{class:"font-bold tracking-wider text-gray-700 uppercase text-md"}," Drop files here ")],-1)),t("input",{onChange:e[0]||(e[0]=(...o)=>r.handleFilesChange&&r.handleFilesChange(...o)),id:"files",type:"file",class:"absolute top-0 left-0 w-full h-full p-10 bg-red-100 opacity-0",multiple:""},null,32)]),t("div",I,[(i(!0),n(g,null,x(l.photographs.data,(o,d)=>(i(),n("div",{key:d},[t("img",{draggable:"true",onDragstart:c=>c.dataTransfer.setData("text/plain",o.file_path),src:`https://localhost${o.image_lcl}`,alt:""},null,40,L)]))),128))]),t("div",M,[e[4]||(e[4]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"Current Page",-1)),t("label",V,[t("span",E,u(l.photographs.current_page),1)]),e[5]||(e[5]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"Last Page",-1)),t("label",S,[t("span",H,u(l.photographs.last_page),1)]),e[6]||(e[6]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"Per Page",-1)),t("label",N,[t("span",R,u(l.photographs.per_page),1)]),e[7]||(e[7]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"Total",-1)),t("label",z,[t("span",A,u(l.photographs.total),1)]),e[8]||(e[8]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"From",-1)),t("label",q,[t("span",G,u(l.photographs.from),1)]),e[9]||(e[9]=t("label",{class:"text-xs font-semibold uppercase px-3 py-2"},"To",-1)),t("label",J,[t("span",K,u(l.photographs.to),1)])]),t("div",O,[t("button",{onClick:e[1]||(e[1]=o=>r.firstPage(l.photographs.first_page_url)),class:"bg-blue-500 text-white text-xs font-semibold uppercase px-4 py-2"},"first page"),(i(!0),n(g,null,x(l.photographs.links,(o,d)=>(i(),n("button",{key:o.label,onClick:c=>r.routePage(o.url),disabled:o.active,innerHTML:o.label,class:$([{"bg-red-500":o.active,"bg-blue-500":!o.active},"text-white text-xs font-semibold uppercase px-3 py-2"])},null,10,Q))),128)),t("button",{onClick:e[2]||(e[2]=o=>r.lastPage(l.photographs.last_page_url)),class:"bg-blue-500 text-white text-xs font-semibold uppercase px-4 py-2"},"last page")])],64)}const X=_(D,[["render",W]]),Y={components:{Preview:U,Upload:X}},Z={class:"flex w-full"},ee={class:"w-1/2"},te={class:"w-1/2"};function se(s,e,p,a,l,r){const o=b("Upload"),d=b("Preview");return i(),n("div",Z,[t("div",ee,[m(o)]),t("div",te,[m(d)])])}const re=_(Y,[["render",se]]);export{re as default};
